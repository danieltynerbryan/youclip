<div class="row">
	<div class="col-md-12">
		<div class="video-player" id="video-player">
			<div id="player" class="player">You need Flash player 8+ and JavaScript enabled to view this video.</div>
			<div class="video-control">
				<button class="btn pull-left" onclick="playClip();">
					<span class="glyphicon glyphicon-play"></span>
				</button>
				<div class="video-time pull-left">
					<span id="video-time">00:00</span>
					<span>&nbsp;|&nbsp;</span>
					<%= Time.at(@clip.end - @clip.start).utc.strftime("%M:%S") %>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	
	var player;
	function onYouTubeIframeAPIReady() {
		player = new YT.Player('player', {
			width: '100%',
			videoId: '<%= @clip.youtube_id %>',
			playerVars: { 'controls': 0 },
			events: { 'onReady': onPlayerReady }
		});
	}
	
	function playClip(){
		player.setPlaybackQuality('hd720');
		player.loadVideoById({
			videoId:'<%= @clip.youtube_id %>', 
			startSeconds:<%= @clip.start %>, 
			endSeconds:<%= @clip.end %>
		});
    }

	function onPlayerReady(event){
        playClip();
    }
    
    function showTime(){
	    time = player.getDuration();
	    $('#video-time').innerHTML(time);
    }
	
</script>