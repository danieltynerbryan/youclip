<%= hidden_field_tag('clip_youtube_id', @clip.youtube_id) %>

<%= render 'player' %>

<script type="text/javascript">
	
	var player;
	function onYouTubeIframeAPIReady() {
		player = new YT.Player('player', {
			width: '100%',
			videoId: '<%= @clip.youtube_id %>',
			playerVars: { 'controls': 0 },
			events: { 'onReady': onPlayerReady }
		});
	}
	
	function playClip(){
		player.setPlaybackQuality('hd720');
		player.loadVideoById({
			videoId:'<%= @clip.youtube_id %>', 
			startSeconds:<%= @clip.start %>, 
			endSeconds:<%= @clip.end %>
		});
    }

	function onPlayerReady(event){
        playClip();
    }
    
    function showTime(){
	    time = player.getDuration();
	    $('#video-time').innerHTML(time);
    }
	
</script>